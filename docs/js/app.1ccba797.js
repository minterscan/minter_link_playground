(function(t){function e(e){for(var s,i,o=e[0],r=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(p.length)p.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],s=!0,o=1;o<n.length;o++){var r=n[o];0!==a[r]&&(s=!1)}s&&(c.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},c=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/minter_link_playground/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=r;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("Example")],1)},c=[],i=n("5530"),o=n("2f62"),r=n("d4ec"),l=n("bee2"),u=n("158a"),d=n("7001"),p=n("40c9"),m=n("b1ba"),f=function(){function t(){Object(r["a"])(this,t)}return Object(l["a"])(t,null,[{key:"set",value:function(t,e){localStorage.setItem(t,e)}},{key:"get",value:function(t){return localStorage.getItem(t)}},{key:"clear",value:function(t){localStorage.removeItem(t)}},{key:"verifySignature",value:function(t,e,n){var s=Object(p["toBuffer"])(e),a=Object(m["fromRpcSig"])(n),c=Object(m["ecrecover"])(s,a.v,a.r,a.s),i=Object(d["pubToAddress"])(c);return Object(u["a"])(t)===Object(p["bufferToHex"])(i)}}]),t}(),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"start"},[n("img",{staticClass:"logo",attrs:{src:t.publicPath+"/img/logo.svg"}})]),n("div",{staticClass:"end"},[t.isAuthenticated?n("span",{staticClass:"username"},[t._v(" Hidden content, visible for logged-in users only ")]):t._e(),t.error?n("span",{staticClass:"error"},[t._v("Rejected")]):t._e(),!t.isAuthenticated&&t.wallet?n("button",{staticClass:"button auth",attrs:{disabled:t.loading},on:{click:function(e){return t.authRequest()}}},[t._v(" Sign In ")]):t._e(),t.isAuthenticated?n("button",{staticClass:"button active auth",on:{click:function(e){return t.signOut()}}},[t._v(" Sign out ")]):t._e()])])},b=[],v=(n("d3b7"),{name:"Header",data:function(){return{publicPath:"/minter_link_playground/",loading:!1,error:!1}},computed:Object(i["a"])({},Object(o["c"])(["isAuthenticated","isUnlocked","wallet"])),methods:{authRequest:function(){var t=this;this.isUnlocked&&(this.error=!1,this.loading=!0,this.minterConnect.signRequest("Hello Minter").then((function(e){var n=e.personalMessage,s=e.signature;t.loading=!1,f.verifySignature(t.wallet,n,s)&&(f.set(t.wallet,!0),t.$store.commit("isAuthenticated",!0))})).catch((function(){t.error=!0})).finally((function(){t.loading=!1})))},signOut:function(){f.clear(this.wallet),this.$store.commit("isAuthenticated",!1)}}}),_=v,y=n("2877"),g=Object(y["a"])(_,h,b,!1,null,null,null),C=g.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cp example"},[n("welcome"),n("status"),n("div",{staticClass:"blocks"},[n("connect"),n("payment")],1)],1)},O=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status"},[t._v(" Browser extension "),t.isInstalled?[t._v(" v. "+t._s(t.version)+" ")]:t._e(),t._v(" is "),n("span",{staticClass:"dashed"},[t._v(" "+t._s(t.isInstalled?"installed":"not installed")+" ")]),t.isInstalled?[t._v(" and "),n("span",{staticClass:"dashed"},[t._v(" "+t._s(t.isUnlocked?"unlocked":"locked")+" ")])]:t._e()],2)},w=[],x={name:"Status",computed:Object(i["a"])({},Object(o["c"])(["isInstalled","isUnlocked","version"]))},P=x,A=Object(y["a"])(P,j,w,!1,null,null,null),I=A.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[n("div",{staticClass:"title"},[t._v("Connect example")]),n("img",{attrs:{alt:"Connect",src:t.publicPath+"/img/browser.svg"}}),n("div",{staticClass:"name"},[t.wallet?n("a",{attrs:{href:"https://minterscan.net/address/"+t.wallet,target:"_blank"}},[t._v(" "+t._s(t.wallet)+" ")]):[t._v("Not connected")]],2),n("button",{staticClass:"button",class:t.wallet?"active":"",on:{click:function(e){return t.connectRequest()}}},[t.isInstalled&&t.isUnlocked?[t.wallet?[t._v(" Connected ")]:[t._v(" Connect ")]]:[t._v(" Unlock "+t._s(t.extensionName)+" to connect ")]],2),t.connectError?n("p",{staticClass:"error"},[t._v(" Connect was rejected ")]):t._e()])},U=[],$={name:"Connect",computed:Object(i["a"])({},Object(o["b"])(["publicPath"]),{},Object(o["c"])(["extensionName","isInstalled","isUnlocked","wallet"])),data:function(){return{connectError:!1}},methods:{connectRequest:function(){var t=this;this.connectError=!1,this.minterConnect.connectRequest().then((function(e){t.$store.commit("wallet",e)})).catch((function(){t.connectError=!0}))}}},S=$,R=Object(y["a"])(S,E,U,!1,null,null,null),H=R.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[n("div",{staticClass:"title"},[t._v("Payment example")]),n("img",{attrs:{alt:t.product.name,src:t.publicPath+"/img/"+t.product.icon+".svg"}}),n("div",{staticClass:"name"},[t._v(t._s(t.product.name))]),n("button",{staticClass:"button",on:{click:function(e){return t.paymentRequest(t.index)}}},[t.isInstalled&&t.isUnlocked?[t._v(" Pay "),n("b",[t._v(t._s(t.product.price)+" "+t._s(t.product.coin))])]:[n("b",[t._v(t._s(t.product.price)+" "+t._s(t.product.coin))]),t._v(". Unlock "+t._s(t.extensionName)+" to pay ")]],2),t.paymentError?n("p",{staticClass:"error"},[t._v(" Payment was rejected ")]):t._e(),t.paymentAccept?n("p",{staticClass:"success"},[n("a",{attrs:{href:"https://minterscan.net/tx/"+t.paymentHash,target:"_blank"}},[t._v("Payment accepted")])]):t._e()])},M=[],N={name:"Connect",computed:Object(i["a"])({},Object(o["b"])(["publicPath"]),{},Object(o["c"])(["extensionName","isInstalled","isUnlocked","wallet"])),data:function(){return{paymentHash:"",paymentAccept:!1,paymentError:!1,paymentAddress:"Mx1111efde6d4a7b0d32ca6905deaa52e465111111",orderId:"ORDER-1",product:{name:"Delicious Pizza",icon:"pizza",price:1,coin:"BIP"}}},methods:{paymentRequest:function(t){var e=this;this.paymentHash="",this.paymentError=!1,this.paymentAccept=!1;var n={address:this.paymentAddress,amount:this.products[t].price,coin:this.products[t].coin,payload:this.orderId};this.minterConnect.paymentRequest(n).then((function(t){e.paymentHash=t,e.paymentAccept=!0})).catch((function(){e.paymentHash="",e.paymentError=!0}))}}},T=N,z=Object(y["a"])(T,q,M,!1,null,null,null),B=z.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"welcome"},[t._v(" Welcome to "),n("a",{attrs:{href:t.extensionUrl,target:"_blank"}},[t._v(t._s(t.extensionName))]),t._v(" playground ")])},J=[],L={name:"Connect",computed:Object(i["a"])({},Object(o["c"])(["extensionName","extensionUrl"]))},W=L,F=Object(y["a"])(W,D,J,!1,null,null,null),G=F.exports,K={name:"Example",components:{Connect:H,Payment:B,Status:I,Welcome:G}},Q=K,V=Object(y["a"])(Q,k,O,!1,null,null,null),X=V.exports,Y={name:"App",components:{Header:C,Example:X},computed:Object(i["a"])({},Object(o["c"])(["wallet"])),watch:{wallet:function(){this.authCheck()}},mounted:function(){this.subscribe(),this.authCheck()},methods:{authCheck:function(){this.$store.commit("isAuthenticated",!1),f.get(this.wallet)&&this.$store.commit("isAuthenticated",!0)},subscribe:function(){var t=this;this.minterConnect.subscribe("isInstalled",(function(e){t.$store.commit("isInstalled",e)})),this.minterConnect.subscribe("isUnlocked",(function(e){t.$store.commit("isUnlocked",e),e||t.$store.commit("isAuthenticated",!1)})),this.minterConnect.subscribe("version",(function(e){t.$store.commit("version",e)})),this.minterConnect.subscribe("wallet",(function(e){t.$store.commit("wallet",e)}))}}},Z=Y,tt=Object(y["a"])(Z,a,c,!1,null,null,null),et=tt.exports;n("fb98");s["a"].use(o["a"]);var nt=new o["a"].Store({state:{extensionName:"MinterLink",extensionUrl:"https://github.com/minterscan/minter_link",isAuthenticated:!1,isInstalled:!1,isUnlocked:!1,version:"",wallet:""},getters:{publicPath:function(){return"/minter_link_playground/"}},mutations:{isAuthenticated:function(t,e){t.isAuthenticated=e},isInstalled:function(t,e){t.isInstalled=e},isUnlocked:function(t,e){t.isUnlocked=e},version:function(t,e){t.version=e},wallet:function(t,e){t.wallet=e}}}),st=n("aa18"),at={install:function(t){t.prototype.minterConnect=new st["a"]("MinterLink Playground")}};s["a"].config.productionTip=!1,s["a"].use(at),new s["a"]({store:nt,render:function(t){return t(et)}}).$mount("#app")},fb98:function(t,e,n){}});
//# sourceMappingURL=app.1ccba797.js.map